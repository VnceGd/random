<!DOCTYPE html>
<!-- Vincent Nguyen 2018 -->
<!-- A remake of Dungeon Dilemma (github.com/vncegd/dungeon-proto) with no server side handling -->
<html>
  <head>
    <meta charset="UTF-8">
    <title>Dungeon Dilemma</title>
    <link rel="icon" type="image/png" href="../images/dungeonFavicon.png"/>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="../css/dungeon.css" rel="stylesheet">
  </head>
  <body>
    <!-- SETTINGS MENU -->
    <div class="menu" id="settingsMenu">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('settings')">&#9668; Back</button>
        <h1>Settings</h1>
        <div id="basicSettings">
          <h3>Basic</h3>
          <p>
            <b>Difficulty:</b> <br>
            <label class="radioLabel">Easy 
              <input type="radio" name="difficulty" value="0" onchange="updateDifficulty()"/>
              <span class="checkmark"></span>
            </label>
            <label class="radioLabel">Normal 
              <input class="radio" type="radio" name="difficulty" value="1" onchange="updateDifficulty()" checked/>
              <span class="checkmark"></span> 
            </label>
            <label class="radioLabel">Hard 
              <input class="radio" type="radio" name="difficulty" value="2" onchange="updateDifficulty()"/>
              <span class="checkmark"></span> 
            </label>
            <label class="radioLabel">Insane 
              <input class="radio" type="radio" name="difficulty" value="3" onchange="updateDifficulty()"/>
              <span class="checkmark"></span> 
            </label>
            <label class="radioLabel">Nightmare 
              <input class="radio" type="radio" name="difficulty" value="4" onchange="updateDifficulty()"/>
              <span class="checkmark"></span> 
            </label>
            <label class="radioLabel">Custom 
              <input class="radio" type="radio" name="difficulty" value="5" onchange="updateDifficulty()"/>
              <span class="checkmark"></span> 
            </label>
          </p>
        </div>
        <div id="advSettings">
          <h3>Advanced</h3>
          <p>
            <b>Dungeon Length (# of Rooms)</b>: <span id="roomCountText">5</span> <br>
            <input id="roomCount" class="slider" type="range" min="3" max="15" value="5" oninput="updateSettings()"/> <br>
            <b>Room width</b>: <span id="roomWidthText">5</span> (Room size = <span id="roomSizeText">25</span>)<br>
            <input id="roomWidth" class="slider" type="range" min="3" max="12" value="5" oninput="updateSettings()"/> <br>
            <b>Monsters per room</b>: <span id="monSpawnRateText">4</span> <br>
            <input id="monSpawnRate" class="slider" type="range" min="1" max="50" value="4" oninput="updateSettings()"/> <br>
            <b>Elite Monsters per room</b>: <span id="eliteSpawnRateText">2</span> <br>
            <input id="eliteSpawnRate" class="slider" type="range" min="0" max="20" value="2" oninput="updateSettings()"/> <br>
            <b>Items per room</b>: <span id="itemSpawnRateText">4</span> <br>
            <input id="itemSpawnRate" class="slider" type="range" min="1" max="50" value="4" oninput="updateSettings()"/> <br>
          </p>
        </div>
      </div>
    </div>
    <!-- CREDITS -->
    <div class="menu" id="creditsScreen">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('credits')">&#9668; Back</button>
        <h1>Credits</h1>
        <h3>Made By</h3>
        <p>
          Vincent Nguyen <br>
          <a href="https://github.com/vncegd">Github</a>
        </p>
        <h3>References</h3>
        <p>
          <a href="https://w3schools.com">W3Schools</a> (HTML, CSS, Javascript) <br>
          <a href="https://material.io/design/">Google Material Design</a> (Design, Colors) <br>
          <a href="https://github.com/vncegd/dungeon-proto">Dungeon Proto</a> (School project, Original inspiration)
        </p>
      </div>
    </div>
    <!-- PATCH NOTES -->
    <div class="menu" id="patchNotesScreen">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('patchNotes')">&#9668; Back</button>
        <h1>Patch Notes</h1>
        <h3>v0.3.0 (11/16/2018)</h3>
        <b>Updates:</b>
          <ul>
            <li>Updated UI</li>
            <li>New Item: Menacing Mask
              <ul>
                <li>Halves the monster's next attack roll</li>
              </ul>
            </li>
          </ul>
        <h3>v0.2.1 (09/18/2018)</h3>
          <b>Updates:</b>
          <ul>
            <li>Player can now lose the game</li>
            <li>Damage taken/restored now displayed next to health</li> 
            <li>Adjusted settings for all difficulties</li>
            <li>Increased speed of actions</li>
            <li>Replaced 'item found' alert with text popup</li>
            <li>Added soft gradient to tiles, 2x damage indicator</li>
          </ul>
          <b>Fixes:</b>
          <ul>
            <li>Health now updates immediately after using a potion</li>
            <li>Items are reset when beginning a new dungeon</li>
          </ul>
        <h3>v0.2.0 (09/18/2018)</h3>
          <b>Updates:</b>
          <ul>
            <li>Items can now be found and used in combat (check character menu)</li>
            <li>Room progression menu contains new information</li>
            <li>Placeholder favicon added</li>
          </ul>
          <b>Fixes: </b>
            <li>Title screen position no longer changes after quitting a game</li>
            <li>Player's health now resets when starting a new game</li>
            <li>Player can no longer move after finishing a dungeon</li>
            <li>Tiles are now displayed properly on certain widths</li>
          <b>Issues:</b>
          <ul>
            <li>Investigating a bug where a key gets stuck in the queue, causing keypresses to move the player in the wrong direction</li>
          </ul>
        <h3>v0.1.2 (09/14/2018)</h3>
          <b>Updates:</b>
          <ul>
            <li>Combat encounters added</li>
            <li>Token icons added to 'How to Play'</li>
            <li>'Room' and 'Character' buttons added (not fully implemented)</li>
            <li>Room progression added</li>
            <li>Resized 'Movement' SVG in 'How to Play'</li>
          </ul>
        <h3>v0.1.1 (09/14/2018)</h3>
          <b>Updates:</b>
          <ul>
            <li>WASD Movement</li>
            <li>Icons created for board tokens</li>
            <li>Fog added to dungeon rooms</li>
            <li>Fixed 'Credits' button opening patch notes</li>
          </ul>
        <h3>v0.1.0 (09/13/2018)</h3>
          <b>This version includes:</b>
          <ul>
            <li>Basic UI Interaction</li>
            <li>Ability to change settings/difficulty</li>
            <li>Room generation</li>
          </ul>
      </div>
    </div>
    <!-- TITLE -->
    <div class="titleScreen">
      <h1>DUNGEON DILEMMA</h1>
      <div class="buttonBox">
        <button onclick="startGame()">Play</button> <br>
        <button onclick="toggleMenu('settings')">Settings</button> <br>
        <button onclick="toggleMenu('help')">How to Play</button> <br>
        <button onclick="toggleMenu('credits')">Credits</button> <br>
        <button onclick="quitGame()" id="exitBtn">Quit</button> <br>
        <button id="versionBtn" onclick="toggleMenu('patchNotes')"><span id="versionNo">v0.3.0</span></button>
      </div>
      <div class="footer">
        <span id="author"><img style="width: 2vmin" src="../images/GitHub-Mark-120px-plus.png"/> VnceGd</span>
      </div>
    </div>
    <!-- COMBAT -->
    <div class="menu" id="combatScreen">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('combatHelp')">Combat Help</button>
        <h1>Battle!</h1>
        <div id="playerActions">
          <h3>You</h3>
          <p>Health: <span id="playerHealth">100</span></p>
          <div id="playerDice">
            <button class="die" id="die0" onclick="selectDie(0)">1</button>
            <button class="die" id="die1" onclick="selectDie(1)">1</button>
            <button class="die" id="die2" onclick="selectDie(2)">1</button>
            <button class="die" id="die3" onclick="selectDie(3)">1</button>
            <button class="die" id="die4" onclick="selectDie(4)">1</button>
          </div>
          <button id="attackButton" onclick="playerAction('attack')">Attack</button> <br>
          <button id="defendButton" onclick="playerAction('defend')">Defend</button> <br>
          <button id="itemButton" onclick="playerAction('item')">Use Item</button> <br>
          <button id="fleeButton" onclick="playerAction('flee')">Flee Battle</button>
        </div>
        <div id="monsterActions">
          <h3 id="monsterTag">Monster</h3>
          <p>Health: <span id="monsterHealth">10</span></p>
          <div id="monsterDice">
            <button class="die" id="monDie0">1</button>
            <button class="die" id="monDie1">1</button>
            <button class="die" id="monDie2">1</button>
          </div>
        </div>
        <div style="clear:both;"></div>
      </div>
    </div>
    <!-- ROOM PROGRESSION -->
    <div class="menu" id="roomInfoScreen">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('room')">&#9668; Back</button>
        <h1>Room Progress</h1>
        <p><b>Monsters Defeated</b>: <span id="monsterProgress"></span></p>
        <p><b>Elites Defeated</b>: <span id="eliteProgress"></span></p>
        <p><b>Items Found</b>: <span id="itemProgress"></span></p>
        <p><b>Tiles Explored</b>: <span id="tileProgress"></span></p>
      </div>
    </div>
    <!-- CHARACTER -->
    <div class="menu" id="characterScreen">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('character')">&#9668; Back</button>
        <h1>Character</h1>
        <h3>Health: <span id="characterHealth">100</span></h3> 
        <hr>
        <h3>Items</h3>
        <p id="itemContainer">
          <button class="characterItem" onclick="useItem(0)">
            Small Health Potion (<span id="smHealthPot">0</span>) <br>
            <span class="itemDesc">Restores 20 HP</span>
          </button>
          <button class="characterItem" onclick="useItem(1)">
            Large Health Potion (<span id="lgHealthPot">0</span>) <br>
            <span class="itemDesc">Restores 40 HP</span>
          </button>
          <button class="characterItem" onclick="useItem(2)">
            2x Damage Booster (<span id="doubleDamage">0</span>) <br>
            <span class="itemDesc">Doubles your attack power</span>
          </button>
          <button class="characterItem" onclick="useItem(3)">
            Menacing Mask (<span id="madMask">0</span>) <br>
            <span class="itemDesc">Halves monster attack power</span>
          </button>
        </p>
      </div>
    </div>
    <!-- EXIT FOUND -->
    <div class="menu" id="exitRoomMenu">
      <div class="menu-content">
        <h1>Exit Found</h1>
        <h3>There is no turning back.</h3>
        <h3>Proceed to the next room?</h3>
        <button onclick="nextRoom()">Leave</button>
        <button onclick="toggleMenu('exit')">Stay</button>
      </div>
    </div>
    <!-- COMBAT HELP -->
    <div class="menu" id="combatHelpMenu">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('combatHelp')">&#9668; Back</button>
        <h1>Combat Tutorial</h1>
        <h3>Stamina</h3>
        <p>
          You start each battle with 5 stamina, represented by your active dice. <br>
          You regenerate 1 stamina each turn. <br>
        </p>
        <h3>Attacking</h3>
        <p>
          Monster rolls its dice each turn. <br>
          Choose any amount of active dice to fight the monster with. <br>
          The difference in the total numbers rolled becomes damage inflicted. <br>
        </p>
        <h3>Defending</h3>
        <p>
          Monster attacks with 1 less die. <br>
          You regenerate 1 extra stamina.
        </p>
        <h3>Items</h3>
        <p>
          One item can be used per turn. <br>
          Items used are only effective the turn they are played. <br>
          Monster does not attack when you use an item.
        </p>
        <h3>End of Battle</h3>
        <p>
          The battle ends when either you or the monster drops to 0 health. <br>
          You may also flee but take 1 die of damage. <br>
          Monster remains and is restored to full health.
        </p>
      </div>
    </div>
    <!-- HOW TO PLAY -->
    <div class="menu" id="helpMenu">
      <div class="menu-content">
        <button class="backBtn" onclick="toggleMenu('help')">&#9668; Back</button>
        <h1>How to Play</h1>
        <p>
          Battle & loot your way through a series of rooms populated by monsters. <br>
          Reach the end to win. <br> <br>
          When encountering a monster, press the 'Combat Help' button to view a combat tutorial.
          <hr>
          <h3>Controls:</h3> 
          <svg id="wasdSVG" width="20vmin" viewbox="0 0 100 100">
            <text x="0" y="20" fill="black">Movement</text>
            <g>
              <polygon points="35,35 65,35 65,65 35,65" style="fill: #BDBDBD"/>
              <text x="50" y="50" fill="black" text-anchor="middle" alignment-baseline="central">W</text>
            </g>
            <g>
              <polygon points="0,70 30,70 30,100 0,100" style="fill: #BDBDBD"/>
              <text x="15" y="85" fill="black" text-anchor="middle" alignment-baseline="central">A</text>
            </g>
            <g>
              <polygon points="35,70 65,70 65,100 35,100" style="fill: #BDBDBD"/>
              <text x="50" y="85" fill="black" text-anchor="middle" alignment-baseline="central">S</text>
            </g>
            <g>
              <polygon points="70,70 100,70 100,100 70,100" style="fill: #BDBDBD"/>
              <text x="85" y="85" fill="black" text-anchor="middle" alignment-baseline="central">D</text>
            </g>
          </svg>
        </p>
        <h3>Icons:</h3>
        <div class="tokenContainer">
          <div class="tokenBox">
            <b>Player</b>
            <div class="token" style="background-color: #B2EBF2;">
              <svg width='100%' viewbox='0 0 100 100'>
                <polygon points='50,25 75,75 25,75'/>
              </svg>
            </div>
          </div>
          <div class="tokenBox">
            <b>Exit</b> <br>
            <div class="token" style="background-color: #CFD8DC;">
              <svg class='exitSVG' width='100%' viewbox='0 0 100 100'>
                <line x1='25' y1='5' x2='25' y2='75'/>
                <line x1='75' y1='5' x2='75' y2='75'/>
                <line x1='25' y1='20' x2='75' y2='20'/>
                <line x1='25' y1='40' x2='75' y2='40'/>
                <line x1='25' y1='60' x2='75' y2='60'/>
              </svg>
            </div>
          </div>
          <div class="tokenBox">
            <b>Monster</b> <br>
            <div class="token" style="background-color: #F44336;">
              <svg width='100%' viewbox='0 0 100 100'>
                <polygon points='50,25 75,50 50,75 25,50'/>
              </svg>
            </div>
          </div>
          <div class="tokenBox">
            <b>Elite</b> <br>
            <div class="token" style="background-color: #BA68C8;">
              <svg width='100%' viewbox='0 0 100 100'>
                <polygon points='50,20 75,75 20,40 80,40 25,75'/>
              </svg>
            </div>
          </div>
          <div class="tokenBox">
            <b>Item</b> <br>
            <div class="token" style="background-color: #FFF176;">
              <svg width='100%' viewbox='0 0 100 100'>
                <polygon points='25,35 35,25 65,25 75,35 75,45 25,45'/>
                <polygon points='25,50 75,50 75,75 25,75'/>
              </svg>
            </div>
          </div>
        </div>
        <div style="clear:both;"></div>
      </div>
    </div>
    <!-- GAME BOARD -->
    <div class="gameBoard" style="display:none">
      <div class="gameMenu">
        <button class="backBtn" onclick="quitToTitle()">Quit</button>
        <button onclick="toggleMenu('room')">Room <span id="roomNo">1</span></button>
        <button onclick="toggleMenu('character')">Character</button>
        <button onclick="toggleMenu('help')">?</button>
      </div>
      <table id="room"></table>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
    <script src="../scripts/dungeon.js"></script>
  </body>
</html>